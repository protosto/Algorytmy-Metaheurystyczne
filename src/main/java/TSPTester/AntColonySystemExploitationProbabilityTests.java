package TSPTester;

import TSPLoader.TSPLoader;
import TSPSolver.AntColonyOptimization.AntColonySystem;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

public class AntColonySystemExploitationProbabilityTests {
    public static void runTests(List<String> fileNames) throws IOException {
        String path = "C:\\Users\\123w4\\Desktop\\ACS\\";
        List<BufferedWriter> bufferedWriterList = new ArrayList<>();
        List<double[][]> distanceMatrices = new ArrayList<>();

        for (String fileName : fileNames) {
            bufferedWriterList.add(new BufferedWriter(new FileWriter(new File(path + fileName + "ExploitationProbability.csv"))));
            distanceMatrices.add(TSPLoader.loadDistanceMatrixFromFile(fileName + ".tsp"));
        }

        for(int k = 0; k < 25; k++) {
            for(double i = 0.0; i <= 1.01; i += 0.1) {
                AntColonySystem antColonySystem = new AntColonySystem(20, 0.1, 0.1, 1, i, 100, 1, 1, 1, true, false, false);

                for(int h = 0; h < fileNames.size(); h++) {
                    System.out.println(fileNames.get(h) + " " + i + " " + k);
                    bufferedWriterList.get(h).write(antColonySystem.solve(distanceMatrices.get(h)).getObjectiveFunctionValue() + ",");
                }
            }

            for(BufferedWriter bufferedWriter : bufferedWriterList) {
                bufferedWriter.write("\n");
            }
        }

        for(BufferedWriter bufferedWriter : bufferedWriterList) {
            bufferedWriter.close();
        }
    }
}
